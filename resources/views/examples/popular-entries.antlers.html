{{# Popular entries list - API version for cached sites #}}
{{# Uses Alpine.js to fetch from /!/simple-likes/popular #}}

<div class="p-6 bg-white rounded-lg shadow" x-data="{ entries: [], loading: true }" x-init="
    fetch('/!/simple-likes/popular?limit=5')
        .then(r => r.json())
        .then(data => { entries = data; loading = false; })
        .catch(() => { loading = false; })
">
    <h3 class="mb-4 text-lg font-semibold">Most Popular Content</h3>

    <template x-if="loading">
        <div class="text-center text-gray-500 py-4">Loading...</div>
    </template>

    <template x-if="!loading && entries.length === 0">
        <div class="text-center text-gray-500 py-4">No liked content yet.</div>
    </template>

    <template x-if="!loading && entries.length > 0">
        <div class="space-y-3">
            <template x-for="entry in entries" :key="entry.entry_id">
                <div class="flex items-center justify-between p-3 transition-colors rounded-lg bg-gray-50 hover:bg-gray-100">
                    <div class="flex-1">
                        <template x-if="entry.url">
                            <a :href="entry.url" class="font-medium text-gray-900 hover:text-blue-600" x-text="entry.title"></a>
                        </template>
                        <template x-if="!entry.url">
                            <span class="font-medium text-gray-900" x-text="entry.title"></span>
                        </template>
                        <div class="text-sm text-gray-500" x-text="entry.collection"></div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-0.5 rounded">
                            <span x-text="entry.likes_count"></span> likes
                        </span>
                    </div>
                </div>
            </template>
        </div>
    </template>
</div>
