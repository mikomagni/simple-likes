{{# Top users leaderboard - API version for cached sites #}}
{{# Uses Alpine.js to fetch from /!/simple-likes/top-users #}}

<div class="bg-white rounded-lg shadow p-6" x-data="{ users: [], loading: true }" x-init="
    fetch('/!/simple-likes/top-users?limit=10')
        .then(r => r.json())
        .then(data => { users = data; loading = false; })
        .catch(() => { loading = false; })
">
    <h3 class="text-lg font-semibold mb-4">Top Contributors</h3>

    <template x-if="loading">
        <div class="text-center text-gray-500 py-4">Loading...</div>
    </template>

    <template x-if="!loading && users.length === 0">
        <p class="text-gray-500 text-sm text-center py-4">No likes yet from registered users.</p>
    </template>

    <template x-if="!loading && users.length > 0">
        <ol class="space-y-3">
            <template x-for="user in users" :key="user.user_id">
                <li class="flex items-center gap-3">
                    <template x-if="user.avatar">
                        <img :src="user.avatar" :alt="user.name" class="w-10 h-10 rounded-full object-cover">
                    </template>
                    <template x-if="!user.avatar">
                        <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium"
                             x-text="user.initials"></div>
                    </template>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-gray-900 truncate" x-text="user.name"></p>
                    </div>
                    <div class="flex items-center gap-1 text-sm font-semibold text-rose-500">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                        </svg>
                        <span x-text="user.likes_count"></span>
                    </div>
                </li>
            </template>
        </ol>
    </template>
</div>
